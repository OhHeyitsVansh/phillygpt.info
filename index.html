<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <meta name="description" content="Philly GPT — civic help for Philadelphia (311, parking, SEPTA)." />

  <title>Philly GPT</title>

  <!-- PWA / Add to Home Screen -->
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Philly GPT" />

  <link rel="stylesheet" href="/styles.css" />
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand" aria-label="Philly GPT">
      <div class="logo" aria-hidden="true">PG</div>
      <div class="brand-text">
        <div class="title">Philly GPT</div>
        <div class="subtitle">Practical civic help for Philadelphia</div>
      </div>
    </div>

    <div class="topbar-right">
      <div class="pill" id="weatherPill" title="Philadelphia weather" aria-live="polite">
        <span class="dot" aria-hidden="true"></span>
        <span class="pill-label">Weather:</span>
        <span id="weatherValue">Loading…</span>
      </div>

      <button class="pill" id="a2hsBtn" type="button" title="Add to your phone home screen">
        Add to Home Screen
      </button>

      <a class="pill pill-cta" href="tel:911" aria-label="For emergencies call 911">
        Emergency: <strong>911</strong>
      </a>
    </div>
  </header>

  <main class="layout">
    <!-- Chat -->
    <section class="card chat-card" aria-label="Chat">
      <div class="card-head">
        <div>
          <div class="card-title">Chat</div>
          <div class="card-subtitle">
            Tell me what’s going on and where (neighborhood or closest cross-streets helps). I’ll guide you to the best next step.
          </div>
        </div>
        <button class="btn ghost" id="clearBtn" type="button">Clear</button>
      </div>

      <div class="chat-wrap">
        <div class="messages" id="messages" role="log" aria-live="polite" aria-relevant="additions"></div>

        <form class="composer" id="chatForm" autocomplete="off">
          <textarea
            id="input"
            class="input"
            rows="2"
            placeholder="Ask a Philly question… (Enter sends • Shift+Enter new line)"
            spellcheck="true"
          ></textarea>
          <button class="btn primary" id="sendBtn" type="submit">Send</button>
        </form>

        <div class="tiny" id="statusLine" aria-live="polite"></div>
      </div>
    </section>

    <!-- Side panel -->
    <aside class="card side-card" aria-label="Quick actions">
      <div class="card-head tight">
        <div>
          <div class="card-title">Quick questions</div>
          <div class="card-subtitle">Tap one to send instantly.</div>
        </div>
      </div>

      <div class="chips" id="chips">
        <button class="chip" type="button" data-q="I want to report a city issue in Philadelphia. Tell me the fastest way to do it and what details I should include.">Report a city issue (311)</button>

        <button class="chip" type="button" data-q="There is illegal dumping near me in Philadelphia. Tell me exactly what to document and where to report it.">Illegal dumping</button>

        <button class="chip" type="button" data-q="I got a parking ticket in Philadelphia. Walk me through how to check it, whether it’s worth disputing, and how to contest it.">Parking ticket help</button>

        <button class="chip" type="button" data-q="What are the basics of street parking rules in Philadelphia (signs, meters, street cleaning, loading zones)?">Parking basics</button>

        <button class="chip" type="button" data-q="Help me plan a SEPTA trip. Ask me for what you need (start, destination, time) and give the best option.">Plan a SEPTA trip</button>

        <button class="chip" type="button" data-q="I need help finding local resources in Philadelphia (food, shelter, benefits, crisis support). Ask my neighborhood and what I need, then give next steps.">Get help & resources</button>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="note-block">
        <div class="note-title">Notes</div>
        <ul class="notes">
          <li>Not affiliated with the City of Philadelphia</li>
          <li>Don’t share sensitive personal info here</li>
          <li>If someone is in immediate danger, call 911</li>
        </ul>
      </div>

      <div class="divider" aria-hidden="true"></div>

      <div class="tiny">
        Best experience on mobile: open in your browser and tap “Add to Home Screen.”
      </div>
    </aside>
  </main>

  <!-- Add to Home Screen Modal -->
  <div class="modal-backdrop" id="modalBackdrop" hidden>
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Add Philly GPT to your Home Screen</div>
        <button class="btn ghost" id="modalClose" type="button">Close</button>
      </div>

      <div class="modal-body">
        <div class="modal-section">
          <div class="modal-h">iPhone (Safari)</div>
          <ol class="modal-steps">
            <li>Tap the <strong>Share</strong> icon (square with an up arrow).</li>
            <li>Scroll and tap <strong>Add to Home Screen</strong>.</li>
            <li>Name it “Philly GPT” and tap <strong>Add</strong>.</li>
          </ol>
        </div>

        <div class="modal-section">
          <div class="modal-h">Android (Chrome)</div>
          <ol class="modal-steps">
            <li>Tap the <strong>⋮</strong> menu in the top-right.</li>
            <li>Tap <strong>Add to Home screen</strong>.</li>
            <li>Confirm and tap <strong>Add</strong>.</li>
          </ol>
        </div>

        <div class="tiny">
          If you don’t see the option, refresh the page and try again.
        </div>
      </div>
    </div>
  </div>

  <script src="/app.js" defer></script>
</body>
</html>
